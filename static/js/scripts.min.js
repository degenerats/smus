(function() {
  var extend = function(child, parent) { for (var key in parent) { if (hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    hasProp = {}.hasOwnProperty;

  this.Table = (function() {
    function Table(opt) {
      this.table = opt.table;
    }

    Table.prototype.refreshTable = function() {
      this.table.bootstrapTable('destroy');
      return this.table.bootstrapTable();
    };

    return Table;

  })();

  this.AttendanceTable = (function(superClass) {
    extend(AttendanceTable, superClass);

    function AttendanceTable() {
      return AttendanceTable.__super__.constructor.apply(this, arguments);
    }

    AttendanceTable.prototype.getSubjectIds = function() {
      var self;
      self = this;
      this.subject_ids = [];
      return this.table.find('th.subject').each(function() {
        return self.subject_ids.push($(this).data('field').substr(8, 1));
      });
    };

    AttendanceTable.prototype.showOnlyPercents = function(checkbox) {
      $('.fixed-table-header-columns').remove();
      $('.fixed-table-body-columns').remove();
      this.percent_checkbox = checkbox;
      if (this.percent_checkbox.checked) {
        return this.table.bootstrapTable('showColumn', 'attendance_all_subjects');
      } else {
        return this.table.bootstrapTable('hideColumn', 'attendance_all_subjects');
      }
    };

    AttendanceTable.prototype.refreshTable = function() {
      this.table.bootstrapTable('destroy');
      this.table.bootstrapTable();
      this.table.bootstrapTable('hideColumn', 'attendance_all_subjects');
      if (this.percent_checkbox) {
        this.percent_checkbox.checked = false;
      }
      if (this.select_subject) {
        return this.select_subject.selectpicker('val', 'all');
      }
    };

    AttendanceTable.prototype.filterBySubject = function(select) {
      var $current_subject, i, j, k, l, len, lessons_count, ref, ref1, ref2, subject_id;
      this.select_subject = $(select);
      ref = this.subject_ids;
      for (j = 0, len = ref.length; j < len; j++) {
        subject_id = ref[j];
        if (select.value === 'all') {
          this.table.bootstrapTable('showColumn', "subject_" + subject_id);
        } else {
          $current_subject = this.table.find("th[data-field='subject_" + subject_id + "']");
          lessons_count = +$current_subject.attr('colspan');
          if (+select.value !== +subject_id) {
            for (i = k = 1, ref1 = lessons_count; 1 <= ref1 ? k < ref1 : k > ref1; i = 1 <= ref1 ? ++k : --k) {
              this.table.bootstrapTable('hideColumn', "attendance_fact_" + i + "_" + subject_id);
            }
            this.table.bootstrapTable('hideColumn', "attendance_all_" + subject_id);
            $current_subject.hide();
          } else {
            lessons_count = +$current_subject.attr('colspan');
            for (i = l = 1, ref2 = lessons_count; 1 <= ref2 ? l < ref2 : l > ref2; i = 1 <= ref2 ? ++l : --l) {
              this.table.bootstrapTable('showColumn', "attendance_fact_" + i + "_" + subject_id);
            }
            this.table.bootstrapTable('showColumn', "attendance_all_" + subject_id);
            $current_subject.show();
          }
        }
      }
      $('.fixed-table-header-columns').remove();
      return $('.fixed-table-body-columns').remove();
    };

    return AttendanceTable;

  })(this.Table);

  this.WorkTable = (function(superClass) {
    extend(WorkTable, superClass);

    function WorkTable() {
      return WorkTable.__super__.constructor.apply(this, arguments);
    }

    WorkTable.prototype.sortByProgress = function(a, b) {
      a = +$(a).find('.progress-bar').attr('aria-valuenow');
      b = +$(b).find('.progress-bar').attr('aria-valuenow');
      if (a > b) {
        return 1;
      }
      if (a < b) {
        return -1;
      }
      return 0;
    };

    return WorkTable;

  })(this.Table);

}).call(this);

//# sourceMappingURL=data:application/json;base64,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LENBQUEsRUFKRjtXQUFBLE1BQUE7WUFNRSxhQUFBLEdBQWdCLENBQUMsZ0JBQWdCLENBQUMsSUFBakIsQ0FBc0IsU0FBdEI7QUFDakIsaUJBQVMsMkZBQVQ7Y0FDSSxJQUFDLENBQUEsS0FBSyxDQUFDLGNBQVAsQ0FBc0IsWUFBdEIsRUFBb0Msa0JBQUEsR0FBbUIsQ0FBbkIsR0FBcUIsR0FBckIsR0FBd0IsVUFBNUQ7QUFESjtZQUVBLElBQUMsQ0FBQSxLQUFLLENBQUMsY0FBUCxDQUFzQixZQUF0QixFQUFvQyxpQkFBQSxHQUFrQixVQUF0RDtZQUNBLGdCQUFnQixDQUFDLElBQWpCLENBQUEsRUFWRjtXQUxGOztBQURGO01Ba0JBLENBQUEsQ0FBRSw2QkFBRixDQUFnQyxDQUFDLE1BQWpDLENBQUE7YUFDQSxDQUFBLENBQUUsMkJBQUYsQ0FBOEIsQ0FBQyxNQUEvQixDQUFBO0lBckJlOzs7O0tBMUJZLElBQUMsQ0FBQTs7RUFpRDFCLElBQUMsQ0FBQTs7Ozs7Ozt3QkFDTCxjQUFBLEdBQWdCLFNBQUMsQ0FBRCxFQUFJLENBQUo7TUFDZCxDQUFBLEdBQUksQ0FBQyxDQUFBLENBQUUsQ0FBRixDQUFJLENBQUMsSUFBTCxDQUFVLGVBQVYsQ0FBMEIsQ0FBQyxJQUEzQixDQUFnQyxlQUFoQztNQUNMLENBQUEsR0FBSSxDQUFDLENBQUEsQ0FBRSxDQUFGLENBQUksQ0FBQyxJQUFMLENBQVUsZUFBVixDQUEwQixDQUFDLElBQTNCLENBQWdDLGVBQWhDO01BQ0wsSUFBRyxDQUFBLEdBQUksQ0FBUDtBQUFjLGVBQU8sRUFBckI7O01BQ0EsSUFBRyxDQUFBLEdBQUksQ0FBUDtBQUFjLGVBQU8sQ0FBQyxFQUF0Qjs7YUFDQTtJQUxjOzs7O0tBRE8sSUFBQyxDQUFBO0FBekQxQiIsImZpbGUiOiJzY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNsYXNzIEBUYWJsZVxuICBjb25zdHJ1Y3RvcjogKG9wdCkgLT5cbiAgICBAdGFibGUgPSBvcHQudGFibGVcblxuICByZWZyZXNoVGFibGU6ICgpIC0+XG4gICAgQHRhYmxlLmJvb3RzdHJhcFRhYmxlKCdkZXN0cm95JylcbiAgICBAdGFibGUuYm9vdHN0cmFwVGFibGUoKVxuXG5jbGFzcyBAQXR0ZW5kYW5jZVRhYmxlIGV4dGVuZHMgQFRhYmxlXG5cbiAgZ2V0U3ViamVjdElkczogLT5cbiAgICBzZWxmID0gQFxuICAgIEBzdWJqZWN0X2lkcyA9IFtdXG4gICAgQHRhYmxlLmZpbmQoJ3RoLnN1YmplY3QnKS5lYWNoIC0+XG4gICAgICBzZWxmLnN1YmplY3RfaWRzLnB1c2ggJChAKS5kYXRhKCdmaWVsZCcpLnN1YnN0cig4LCAxKVxuXG4gIHNob3dPbmx5UGVyY2VudHM6IChjaGVja2JveCkgLT5cbiAgICAkKCcuZml4ZWQtdGFibGUtaGVhZGVyLWNvbHVtbnMnKS5yZW1vdmUoKVxuICAgICQoJy5maXhlZC10YWJsZS1ib2R5LWNvbHVtbnMnKS5yZW1vdmUoKVxuICAgIEBwZXJjZW50X2NoZWNrYm94ID0gY2hlY2tib3hcbiAgICBpZiBAcGVyY2VudF9jaGVja2JveC5jaGVja2VkXG4gICAgICBAdGFibGUuYm9vdHN0cmFwVGFibGUoJ3Nob3dDb2x1bW4nLCAnYXR0ZW5kYW5jZV9hbGxfc3ViamVjdHMnKVxuICAgIGVsc2VcbiAgICAgIEB0YWJsZS5ib290c3RyYXBUYWJsZSgnaGlkZUNvbHVtbicsICdhdHRlbmRhbmNlX2FsbF9zdWJqZWN0cycpXG5cbiAgcmVmcmVzaFRhYmxlOiAoKSAtPlxuICAgIEB0YWJsZS5ib290c3RyYXBUYWJsZSgnZGVzdHJveScpXG4gICAgQHRhYmxlLmJvb3RzdHJhcFRhYmxlKClcbiAgICBAdGFibGUuYm9vdHN0cmFwVGFibGUoJ2hpZGVDb2x1bW4nLCAnYXR0ZW5kYW5jZV9hbGxfc3ViamVjdHMnKVxuICAgIGlmIEBwZXJjZW50X2NoZWNrYm94XG4gICAgICBAcGVyY2VudF9jaGVja2JveC5jaGVja2VkID0gZmFsc2VcbiAgICBpZiBAc2VsZWN0X3N1YmplY3RcbiAgICAgIEBzZWxlY3Rfc3ViamVjdC5zZWxlY3RwaWNrZXIoJ3ZhbCcsICdhbGwnKVxuXG4gIGZpbHRlckJ5U3ViamVjdDogKHNlbGVjdCkgLT5cbiAgICBAc2VsZWN0X3N1YmplY3QgPSAkKHNlbGVjdClcbiAgICBmb3Igc3ViamVjdF9pZCBpbiBAc3ViamVjdF9pZHNcbiAgICAgIGlmIHNlbGVjdC52YWx1ZSA9PSAnYWxsJ1xuICAgICAgICBAdGFibGUuYm9vdHN0cmFwVGFibGUoJ3Nob3dDb2x1bW4nLCBcInN1YmplY3RfI3tzdWJqZWN0X2lkfVwiKVxuICAgICAgZWxzZVxuICAgICAgICAkY3VycmVudF9zdWJqZWN0ID0gQHRhYmxlLmZpbmQoXCJ0aFtkYXRhLWZpZWxkPSdzdWJqZWN0XyN7c3ViamVjdF9pZH0nXVwiKVxuICAgICAgICBsZXNzb25zX2NvdW50ID0gKyRjdXJyZW50X3N1YmplY3QuYXR0cignY29sc3BhbicpXG4gICAgICAgIGlmICtzZWxlY3QudmFsdWUgIT0gK3N1YmplY3RfaWRcbiAgICAgICAgICBmb3IgaSBpbiBbMS4uLmxlc3NvbnNfY291bnRdXG4gICAgICAgICAgICAgIEB0YWJsZS5ib290c3RyYXBUYWJsZSgnaGlkZUNvbHVtbicsIFwiYXR0ZW5kYW5jZV9mYWN0XyN7aX1fI3tzdWJqZWN0X2lkfVwiKVxuICAgICAgICAgIEB0YWJsZS5ib290c3RyYXBUYWJsZSgnaGlkZUNvbHVtbicsIFwiYXR0ZW5kYW5jZV9hbGxfI3tzdWJqZWN0X2lkfVwiKVxuICAgICAgICAgICRjdXJyZW50X3N1YmplY3QuaGlkZSgpXG4gICAgICAgIGVsc2VcbiAgICAgICAgICBsZXNzb25zX2NvdW50ID0gKyRjdXJyZW50X3N1YmplY3QuYXR0cignY29sc3BhbicpXG4gICAgICAgICAgZm9yIGkgaW4gWzEuLi5sZXNzb25zX2NvdW50XVxuICAgICAgICAgICAgICBAdGFibGUuYm9vdHN0cmFwVGFibGUoJ3Nob3dDb2x1bW4nLCBcImF0dGVuZGFuY2VfZmFjdF8je2l9XyN7c3ViamVjdF9pZH1cIilcbiAgICAgICAgICBAdGFibGUuYm9vdHN0cmFwVGFibGUoJ3Nob3dDb2x1bW4nLCBcImF0dGVuZGFuY2VfYWxsXyN7c3ViamVjdF9pZH1cIilcbiAgICAgICAgICAkY3VycmVudF9zdWJqZWN0LnNob3coKVxuXG4gICAgJCgnLmZpeGVkLXRhYmxlLWhlYWRlci1jb2x1bW5zJykucmVtb3ZlKClcbiAgICAkKCcuZml4ZWQtdGFibGUtYm9keS1jb2x1bW5zJykucmVtb3ZlKClcblxuY2xhc3MgQFdvcmtUYWJsZSBleHRlbmRzIEBUYWJsZVxuICBzb3J0QnlQcm9ncmVzczogKGEsIGIpIC0+XG4gICAgYSA9ICskKGEpLmZpbmQoJy5wcm9ncmVzcy1iYXInKS5hdHRyKCdhcmlhLXZhbHVlbm93JylcbiAgICBiID0gKyQoYikuZmluZCgnLnByb2dyZXNzLWJhcicpLmF0dHIoJ2FyaWEtdmFsdWVub3cnKVxuICAgIGlmIGEgPiBiIHRoZW4gcmV0dXJuIDFcbiAgICBpZiBhIDwgYiB0aGVuIHJldHVybiAtMVxuICAgIDBcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
